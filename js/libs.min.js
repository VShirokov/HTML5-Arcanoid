var game={width:1024,height:586,ctx:void 0,platform:void 0,ball:void 0,rows:8,cols:14,balls:void 0,score:0,running:!0,blocks:[],sprites:{background:void 0,platform:void 0,ball:void 0,block:void 0},init:function(){var t=document.getElementById("mycanvas");this.ctx=t.getContext("2d"),this.ctx.font="20px Arial",this.ctx.fillStyle="#FFFFFF",window.addEventListener("keydown",function(t){37==t.keyCode?game.platform.dx=-game.platform.velocity:39==t.keyCode?game.platform.dx=game.platform.velocity:32==t.keyCode&&game.platform.releaseBall()}),window.addEventListener("keyup",function(t){game.platform.stop()})},load:function(){for(var t in this.sprites)this.sprites[t]=new Image,this.sprites[t].src="img/"+t+".png"},create:function(){for(var t=0;t<this.rows;t++)for(var i=0;i<this.cols;i++)this.blocks.push({x:68*i+35,y:38*t+35,width:64,height:32,isAlive:!0})},start:function(){this.init(),this.load(),this.create(),this.run()},render:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.drawImage(this.sprites.background,0,0),this.ctx.drawImage(this.sprites.platform,this.platform.x,this.platform.y),this.ctx.drawImage(this.sprites.ball,this.ball.width*this.ball.frame,0,this.ball.width,this.ball.height,this.ball.x,this.ball.y,this.ball.width,this.ball.height),this.blocks.forEach(function(t){t.isAlive&&this.ctx.drawImage(this.sprites.block,t.x,t.y)},this),this.ctx.fillText("SCORE: "+this.score,40,this.height-40)},update:function(){this.ball.collide(this.platform)&&this.ball.bumpPlatform(this.platform),this.platform.dx&&this.platform.move(),(this.ball.dx||this.ball.dy)&&this.ball.move(),this.blocks.forEach(function(t){t.isAlive&&this.ball.collide(t)&&this.ball.bumpBlock(t)},this),this.ball.checkBounds()},run:function(){this.update(),this.render(),this.running&&window.requestAnimationFrame(function(){game.run()})},over:function(t){alert(t),this.running=!1,window.location.reload()}};game.ball={width:22,height:22,frame:0,x:500,y:478,dx:0,dy:0,velocity:4,animate:function(){setInterval(function(){++game.ball.frame>3&&(game.ball.frame=0)},100)},jump:function(){this.dy=-this.velocity,this.dx=-this.velocity,this.animate()},move:function(){this.x+=this.dx,this.y+=this.dy},collide:function(t){var i=this.x+this.dx,s=this.y+this.dy;return i+this.width>t.x&&i<t.x+t.width&&s+this.height>t.y&&s<t.y+t.height},bumpBlock:function(t){this.dy*=-1,t.isAlive=!1,++game.score>=game.blocks.length&&game.over("You win!")},onTheLeftSide:function(t){return(this.x+this.width)/2<(t.x+t.width)/2},bumpPlatform:function(t){this.dy=-this.velocity,this.dx=this.onTheLeftSide(t)?-this.velocity:this.velocity},checkBounds:function(){var t=this.x+this.dx,i=this.y+this.dy;t<0?(this.x=0,this.dx=this.velocity):t+this.width>game.width?(this.x=game.width-this.width,this.dx=-this.velocity):i<0?(this.y=0,this.dy=this.velocity):i+this.height>game.height&&game.over("Game Over")}},game.platform={x:460,y:500,velocity:7,dx:0,ball:game.ball,width:104,height:24,releaseBall:function(){this.ball&&(this.ball.jump(),this.ball=!1)},move:function(){this.x+=this.dx,this.ball&&(this.ball.x+=this.dx)},stop:function(){this.dx=0,this.ball&&(this.ball.dx=0)}},window.addEventListener("load",function(){game.start()});